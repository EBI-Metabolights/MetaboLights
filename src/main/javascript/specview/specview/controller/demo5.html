<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<script src="../../third-party/closure/closure/goog/base.js"></script>
<script src="../deps.js"></script>
<script src="../../specviewTest/data/molfile.js"></script>
<script src="../../specviewTest/data/benzene.js"></script>
<script src="../../specviewTest/data/CMLbenzene.js"></script>
<script src="../../specviewTest/data/CMLbenzene2.js"></script>
<script src="../../specviewTest/data/molStereo.js"></script>
<script src="../../specviewTest/data/specData/acetonitril.js"></script>
<script src="../../specviewTest/data/specData/cmlfile.js"></script>
<script src="../../specviewTest/data/specData/C8H2NF5.js"></script>
<script src="../../specviewTest/data/specData/completebenzene.js"></script>
<script src="../../specviewTest/data/specData/moleculetest.js"></script>
<!-- <script src="../../specviewTest/data/specData/test.xml"></script> -->
<script src="../../specview/io/spec.js"></script>

<script language="JavaScript">
    goog.require('goog.events.EventType');
    goog.require('goog.dom');
    goog.require('goog.ui.Select');
    goog.require('goog.ui.MenuItem');
    goog.require('specview.controller.Controller');
    goog.require('specview.controller.plugins.Highlight');
    goog.require('specview.io.mdl');
    goog.require('specview.model.NMRdata');
    goog.require('specview.io.SpectrumCMLParser');
    goog.require('specview.io.spec');
    goog.require('specview.io.cml')
    goog.require('specview.util');
    goog.require('specview.math.Line');
    goog.require('goog.dom.xml')
</script>

<script>


function initPage(){
	
	
	// uncomment next two lines to debug to console
	var c = new goog.debug.Console(); 
	c.setCapturing(true); 
	
	//Create the canvas and provide it with highlight plugins
	var editor = new specview.controller.Controller(goog.dom.getElement('moleculeContainer'),{background : {color : 'white'}});
	editor.registerPlugin(new specview.controller.plugins.Highlight());

	//Initialisation of a molecule to display when the page is loading
	var cmls=cmlmolecules.split("$$END$$\n");
	var CmlXmlObject=specview.io.SpectrumCMLParser.parseCML(cmls[0]);//XML document
	var cmlObject=specview.io.SpectrumCMLParser.CmlXMLtoGraphicalObject(CmlXmlObject);//a cmlObject
	cmlObject.createMoleculeObjectOutOfCmlParserObject();//This will set the molecule attribute of the cmlObject so it can be a proper molecule
	var molecule=cmlObject.molecule;
				
	editor.setModels([molecule]);

	//Creation of the tool bar
    var select1 = new goog.ui.Select();
    select1.addItem(new goog.ui.MenuItem('0', 0));
    select1.addItem(new goog.ui.MenuItem('1', 1));
    select1.addItem(new goog.ui.MenuItem('2', 2));
    select1.addItem(new goog.ui.MenuItem('3', 3));
    select1.addItem(new goog.ui.MenuItem('4', 4));
    select1.addItem(new goog.ui.MenuItem('5', 5));
    select1.addItem(new goog.ui.MenuItem('6', 6));
    select1.addItem(new goog.ui.MenuItem('7', 7));
    select1.addItem(new goog.ui.MenuItem('8', 8));
    select1.addItem(new goog.ui.MenuItem('9', 9));

    //Adding it to the editor
    select1.setSelectedIndex(0);
    select1.render(goog.dom.getElement('selectMolecule'));
    
    
        goog.events.listen(select1, goog.ui.Component.EventType.ACTION,
        function(e) {
          var select = e.target;
          var idx = select.getValue();
          if(cmls[idx]==undefined){
        	  alert("NO SUCH MOLECULE IN THE ARRAY! Default molecle will be displayed : ")
        	  idx=0;
          }
	      var molfile=cmls[idx];
      	  var CmlXmlObject=specview.io.SpectrumCMLParser.parseCML(molfile);//XML document
    	  var cmlObject=specview.io.SpectrumCMLParser.CmlXMLtoGraphicalObject(CmlXmlObject);//a cmlObject
    	  cmlObject.createMoleculeObjectOutOfCmlParserObject();//This will set the molecule attribute of the cmlObject so it can be a proper molecule
    	  var molecule=cmlObject.molecule;
    	  editor.setModels([molecule]);
        });
  
  var sdfs = sdf.split("$$$$\n");
  
  };

   goog.events.listen(window, goog.events.EventType.LOAD, initPage);

 
</script>


<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Display spectrum demo</title>
	<link rel="stylesheet" href="../../css/specview.css" />
	<link rel="stylesheet"  href="../../css/demo.css" />
</head>

<body>

	<fieldset style="width: 600px">
	<legend><h1>Molecule viewer</h1></legend>
	<br>
	<label id="selectMolecule">Select a molecule to render: </label>
	<br>
			<div id="moleculeContainer" style="height: 400px">
			</div>
	</fieldset>





</body>

</html>
