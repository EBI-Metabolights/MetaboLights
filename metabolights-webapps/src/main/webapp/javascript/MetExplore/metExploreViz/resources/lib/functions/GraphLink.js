/* 
This file is part of MetExploreViz 
 
Copyright (c) 2016 INRA 
 
Contact: http://metexplore.toulouse.inra.fr/metexploreViz/doc/contact 
 
GNU General Public License Usage 
This file may be used under the terms of the GNU General Public License version 3.0 as 
published by the Free Software Foundation and appearing in the file LICENSE included in the 
packaging of this file. 
 
Please review the following information to ensure the GNU General Public License version 3.0 
requirements will be met: http://www.gnu.org/copyleft/gpl.html. 
 
If you are unsure which license is appropriate for your use, please contact us 
at http://metexplore.toulouse.inra.fr/metexploreViz/doc/contact 
 
Version: 1 Build date: 2016-04-13 9:34:37 
*/ 
metExploreD3.GraphLink={link:"",panelParent:"",delayedInitialisation:function(a){metExploreD3.GraphLink.panelParent=a},funcPath1:function(d,b){var f,h,g;function a(u,H){var G=metExploreD3.getMetaboliteStyle();var E=metExploreD3.getReactionStyle();var C=Math.sqrt(Math.pow(H.x-u.x,2)+Math.pow(H.y-u.y,2));var m=(H.x-u.x);var l=(H.y-u.y);var t=m/Math.abs(m);var s=l/Math.abs(l);if(u.getBiologicalType()=="metabolite"){var B=(Math.abs(C)*E.getWidth()/2)/Math.abs(m);var k=(Math.abs(C)*E.getHeight()/2)/Math.abs(l);var r=(B<k)?rT=B:rt=k}else{var B=(Math.abs(C)*G.getWidth()/2)/Math.abs(m);var k=(Math.abs(C)*G.getHeight()/2)/Math.abs(l);var r=(B<k)?rT=B:rt=k}var o=u.x+m*(1-(C-largeurNoeudS)/C);var A=u.y+l*(1-(C-largeurNoeudS)/C);var v=u.x+m*((C-r)/C);var j=u.y+l*((C-r)/C);var n=5;var x=u.x+m*((C-r-n)/C);var p=u.y+l*((C-r-n)/C);var w=x+l*(3/C);var D=p-m*(3/C);var z=u.x+m*(1-(C-largeurNoeudS-n)/C);var q=u.y+l*(1-(C-largeurNoeudS-n)/C);var y=z-l*(3/C);var F=q+m*(3/C);return"M"+o+","+A+"L"+v+","+j+"L"+w+","+D+"L"+x+","+p+"L"+o+","+A+"L"+y+","+F+"L"+z+","+q+"Z"}function g(u,A){var z=metExploreD3.getMetaboliteStyle();var y=metExploreD3.getReactionStyle();var x=Math.sqrt(Math.pow(A.x-u.x,2)+Math.pow(A.y-u.y,2));var m=(A.x-u.x);var l=(A.y-u.y);var t=m/Math.abs(m);var s=l/Math.abs(l);if(u.getBiologicalType()=="metabolite"){var o=(y.getWidth()+y.getHeight())/2/2;var p=(z.getHeight()+z.getWidth())/2/2}else{var o=(z.getHeight()+z.getWidth())/2/2;var p=(y.getWidth()+y.getHeight())/2/2}var v=u.x+m*((x-o)/x);var j=u.y+l*((x-o)/x);var n=5;var k=u.x+m*((x-o-n)/x);var q=u.y+l*((x-o-n)/x);var r=k+l*(3/x);var w=q-m*(3/x);return"M"+u.x+","+u.y+"L"+v+","+j+"L"+r+","+w+"L"+k+","+q+"Z"}if(d.getSource().x==undefined){var e=_metExploreViz.getSessionById(b).getD3Data();var c=e.getNodes();f=c[d.getSource()];h=c[d.getTarget()];if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{f=d.getSource();h=d.getTarget();if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}return g},funcPath2:function(d,b){var f,h,g;function a(y,L){var K=metExploreD3.getMetaboliteStyle();var J=metExploreD3.getReactionStyle();var I=Math.sqrt(Math.pow(L.x-y.x,2)+Math.pow(L.y-y.y,2));var o=(L.x-y.x);var n=(L.y-y.y);var x=o/Math.abs(o);var w=n/Math.abs(n);if(y.getBiologicalType()=="metabolite"){var F=(Math.abs(I)*J.getWidth()/2)/Math.abs(o);var m=(Math.abs(I)*J.getHeight()/2)/Math.abs(n);var t=(F<m)?rT=F:rt=m}else{var F=(Math.abs(I)*K.getWidth()/2)/Math.abs(o);var m=(Math.abs(I)*K.getHeight()/2)/Math.abs(n);var t=(F<m)?rT=F:rt=m}var q=y.x+o*(1-(I-largeurNoeudS)/I);var E=y.y+n*(1-(I-largeurNoeudS)/I);var A=y.x+o*((I-t)/I);var l=y.y+n*((I-t)/I);var p=5;var C=y.x+o*((I-t-p)/I);var r=y.y+n*((I-t-p)/I);var H=C+n*(3/I);var k=r-o*(3/I);var G=C-n*(3/I);var j=r+o*(3/I);var D=y.x+o*(1-(I-largeurNoeudS-p)/I);var s=y.y+n*(1-(I-largeurNoeudS-p)/I);var v=D-n*(3/I);var B=s+o*(3/I);var u=D+n*(3/I);var z=s-o*(3/I);return"M"+q+","+E+"L"+v+","+B+"L"+D+","+s+"L"+C+","+r+"L"+H+","+k+"L"+A+","+l+"L"+G+","+j+"L"+C+","+r+"L"+D+","+s+"L"+u+","+z+"L"+q+","+E+"Z"}function g(u,C){var B=metExploreD3.getMetaboliteStyle();var A=metExploreD3.getReactionStyle();var y=Math.sqrt(Math.pow(C.x-u.x,2)+Math.pow(C.y-u.y,2));var n=(C.x-u.x);var m=(C.y-u.y);var t=n/Math.abs(n);var s=m/Math.abs(m);if(u.getBiologicalType()=="metabolite"){var q=(A.getWidth()+A.getHeight())/2/2;var r=(B.getHeight()+B.getWidth())/2/2}else{var q=(B.getHeight()+B.getWidth())/2/2;var r=(A.getWidth()+A.getHeight())/2/2}var v=u.x+n*((y-q)/y);var l=u.y+m*((y-q)/y);var o=5;var w=u.x+n*((y-q-o)/y);var p=u.y+m*((y-q-o)/y);var z=w+m*(3/y);var k=p-n*(3/y);var x=w-m*(3/y);var j=p+n*(3/y);return"M"+u.x+","+u.y+"L"+w+","+p+"L"+z+","+k+"L"+v+","+l+"L"+x+","+j+"L"+w+","+p+"Z"}if(d.getSource().x==undefined){var e=_metExploreViz.getSessionById(b).getD3Data();var c=e.getNodes();f=c[d.getSource()];h=c[d.getTarget()];if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{f=d.getSource();h=d.getTarget();if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}return g},funcPath3:function(d,b){var f,h,g;function a(w,F){var E=metExploreD3.getMetaboliteStyle();var D=metExploreD3.getReactionStyle();var C=Math.sqrt(Math.pow(F.x-w.x,2)+Math.pow(F.y-w.y,2));var o=(F.x-w.x);var n=(F.y-w.y);var v=o/Math.abs(o);var u=n/Math.abs(n);if(w.getBiologicalType()=="metabolite"){var z=(Math.abs(C)*D.getWidth()/2)/Math.abs(o);var m=(Math.abs(C)*D.getHeight()/2)/Math.abs(n);var t=(z<m)?rT=z:rt=m}else{var z=(Math.abs(C)*E.getWidth()/2)/Math.abs(o);var m=(Math.abs(C)*E.getHeight()/2)/Math.abs(n);var t=(z<m)?rT=z:rt=m}var q=5;var x=w.x+o*((C-t)/C);var l=w.y+n*((C-t)/C);var q=5;var y=w.x+o*((C-t-q)/C);var s=w.y+n*((C-t-q)/C);var p=w.x+o*((C-t-q-q)/C);var r=w.y+n*((C-t-q-q)/C);var B=y+n*(3/C);var k=s-o*(3/C);var A=y-n*(3/C);var j=s+o*(3/C);return"M"+w.x+","+w.y+"L"+p+","+r+"L"+B+","+k+"L"+A+","+j+"L"+x+","+l+"L"+B+","+k+"L"+A+","+j+"L"+p+","+r+"Z"}function g(u,D){var C=metExploreD3.getMetaboliteStyle();var B=metExploreD3.getReactionStyle();var A=Math.sqrt(Math.pow(D.x-u.x,2)+Math.pow(D.y-u.y,2));var o=(D.x-u.x);var n=(D.y-u.y);var t=o/Math.abs(o);var s=n/Math.abs(n);if(u.getBiologicalType()=="metabolite"){var x=(Math.abs(A)*B.getWidth()/2)/Math.abs(o);var m=(Math.abs(A)*B.getHeight()/2)/Math.abs(n);var r=(x<m)?rT=x:rt=m}else{var x=(Math.abs(A)*C.getWidth()/2)/Math.abs(o);var m=(Math.abs(A)*C.getHeight()/2)/Math.abs(n);var r=(x<m)?rT=x:rt=m}var v=u.x+o*((A-r)/A);var l=u.y+n*((A-r)/A);var p=5;var w=u.x+o*((A-r-p)/A);var q=u.y+n*((A-r-p)/A);var z=w+n*(3/A);var k=q-o*(3/A);var y=w-n*(3/A);var j=q+o*(3/A);return"M"+u.x+","+u.y+"L"+w+","+q+"L"+z+","+k+"L"+v+","+l+"L"+y+","+j+"L"+w+","+q+"Z"}if(d.getSource().x==undefined){var e=_metExploreViz.getSessionById(b).getD3Data();var c=e.getNodes();f=c[d.getSource()];h=c[d.getTarget()];if(f!=undefined&&h!=undefined){if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{g="M0,0L0,0Z"}}else{f=d.getSource();h=d.getTarget();if(f!=undefined&&h!=undefined){if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{g="M0,0L0,0Z"}}return g},funcPath4:function(d,b){var f,h,g;function a(z,L){var K=metExploreD3.getMetaboliteStyle();var J=metExploreD3.getReactionStyle();var I=Math.sqrt(Math.pow(L.x-z.x,2)+Math.pow(L.y-z.y,2));var n=(L.x-z.x);var m=(L.y-z.y);var y=n/Math.abs(n);var x=m/Math.abs(m);if(z.getBiologicalType()=="metabolite"){var u=(K.getHeight()+K.getWidth())/2/2;var q=z.x+n*(1-(I-u)/I);var E=z.y+m*(1-(I-u)/I);var o=5;var F=z.x+n*(1-(I-u-o)/I);var t=z.y+m*(1-(I-u-o)/I);var p=z.x+n*(1-(I-u-o-o)/I);var s=z.y+m*(1-(I-u-o-o)/I);var w=F-m*(3/I);var C=t+n*(3/I);var v=F+m*(3/I);var B=t-n*(3/I);g="M"+p+","+s+"L"+w+","+C+"L"+v+","+B+"L"+q+","+E+"L"+w+","+C+"L"+v+","+B+"L"+p+","+s+"L"+L.x+","+L.y+"Z"}else{var u=(K.getWidth()+K.getHeight())/2/2;var q=z.x+n*(1-(I-u)/I);var E=z.y+m*(1-(I-u)/I);var o=5;var A=z.x+n*((I-u)/I);var l=z.y+m*((I-u)/I);var o=5;var D=z.x+n*((I-u-o)/I);var r=z.y+m*((I-u-o)/I);var H=D+m*(3/I);var k=r-n*(3/I);var G=D-m*(3/I);var j=r+n*(3/I);var p=z.x+n*((I-u-o-o)/I);var s=z.y+m*((I-u-o-o)/I);g="M"+z.x+","+z.y+"L"+p+","+s+"L"+H+","+k+"L"+G+","+j+"L"+A+","+l+"L"+H+","+k+"L"+G+","+j+"L"+p+","+s+"Z"}return g}function g(x,J){var I=metExploreD3.getMetaboliteStyle();var H=metExploreD3.getReactionStyle();var G=Math.sqrt(Math.pow(J.x-x.x,2)+Math.pow(J.y-x.y,2));var n=(J.x-x.x);var m=(J.y-x.y);var w=n/Math.abs(n);var v=m/Math.abs(m);if(x.getBiologicalType()=="metabolite"){var s=(I.getHeight()+I.getWidth())/2/2;var q=x.x+n*(1-(G-s)/G);var C=x.y+m*(1-(G-s)/G);var o=5;var p=x.x+n*(1-(G-s-o)/G);var E=x.y+m*(1-(G-s-o)/G);var u=q-m*(3/G);var A=C+n*(3/G);var t=q+m*(3/G);var z=C-n*(3/G);return"M"+J.x+","+J.y+"L"+p+","+E+"L"+u+","+A+"L"+q+","+C+"L"+t+","+z+"L"+p+","+E+"Z"}else{var s=(I.getWidth()+I.getHeight())/2/2;var y=x.x+n*((G-s)/G);var l=x.y+m*((G-s)/G);var o=5;var B=x.x+n*((G-s-o)/G);var r=x.y+m*((G-s-o)/G);var F=B+m*(3/G);var k=r-n*(3/G);var D=B-m*(3/G);var j=r+n*(3/G);return"M"+x.x+","+x.y+"L"+B+","+r+"L"+F+","+k+"L"+y+","+l+"L"+D+","+j+"L"+B+","+r+"Z"}return g}if(d.getSource().x==undefined){var e=_metExploreViz.getSessionById(b).getD3Data();var c=e.getNodes();f=c[d.getSource()];h=c[d.getTarget()];if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{f=d.getSource();h=d.getTarget();if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}return g},funcPath5:function(d,b){var f,h,g;function a(B,Q){var P=metExploreD3.getMetaboliteStyle();var O=metExploreD3.getReactionStyle();var N=Math.sqrt(Math.pow(Q.x-B.x,2)+Math.pow(Q.y-B.y,2));var o=(Q.x-B.x);var n=(Q.y-B.y);var A=o/Math.abs(o);var z=n/Math.abs(n);if(B.getBiologicalType()=="metabolite"){var I=(Math.abs(N)*O.getWidth()/2)/Math.abs(o);var m=(Math.abs(N)*O.getHeight()/2)/Math.abs(n);var v=(I<m)?rT=I:rt=m}else{var I=(Math.abs(N)*P.getWidth()/2)/Math.abs(o);var m=(Math.abs(N)*P.getHeight()/2)/Math.abs(n);var v=(I<m)?rT=I:rt=m}var w=(P.getHeight()+P.getWidth())/2/2;var s=B.x+o*(1-(N-w)/N);var G=B.y+n*(1-(N-w)/N);var p=5;var H=B.x+o*(1-(N-w-p)/N);var u=B.y+n*(1-(N-w-p)/N);var L=B.x+o*(1-(N-w-p-p)/N);var r=B.y+n*(1-(N-w-p-p)/N);var y=H-n*(3/N);var E=u+o*(3/N);var x=H+n*(3/N);var D=u-o*(3/N);var C=B.x+o*((N-w)/N);var l=B.y+n*((N-w)/N);var F=B.x+o*((N-w-p)/N);var t=B.y+n*((N-w-p)/N);var M=F+n*(3/N);var k=t-o*(3/N);var K=F-n*(3/N);var j=t+o*(3/N);var J=B.x+o*((N-w-p-p)/N);var q=B.y+n*((N-w-p-p)/N);return"M"+s+","+G+"L"+y+","+E+"L"+x+","+D+"M"+J+","+q+"L"+M+","+k+"L"+K+","+j+"M"+L+","+r+"L"+y+","+E+"L"+x+","+D+"L"+s+","+G+"L"+y+","+E+"L"+x+","+D+"L"+L+","+r+"L"+J+","+q+"L"+M+","+k+"L"+K+","+j+"L"+C+","+l+"L"+M+","+k+"L"+K+","+j+"L"+J+","+q+"Z"}function g(y,K){var J=metExploreD3.getMetaboliteStyle();var I=metExploreD3.getReactionStyle();var H=Math.sqrt(Math.pow(K.x-y.x,2)+Math.pow(K.y-y.y,2));var n=(K.x-y.x);var m=(K.y-y.y);var x=n/Math.abs(n);var w=m/Math.abs(m);if(y.getBiologicalType()=="metabolite"){var s=(I.getWidth()+I.getHeight())/2/2;var t=(J.getHeight()+J.getWidth())/2/2}else{var s=(J.getHeight()+J.getWidth())/2/2;var t=(I.getWidth()+I.getHeight())/2/2}var q=y.x+n*(1-(H-t)/H);var D=y.y+m*(1-(H-t)/H);var A=y.x+n*((H-s)/H);var l=y.y+m*((H-s)/H);var o=5;var C=y.x+n*((H-s-o)/H);var r=y.y+m*((H-s-o)/H);var G=C+m*(3/H);var k=r-n*(3/H);var F=C-m*(3/H);var j=r+n*(3/H);var p=y.x+n*(1-(H-t-o)/H);var E=y.y+m*(1-(H-t-o)/H);var v=q-m*(3/H);var B=D+n*(3/H);var u=q+m*(3/H);var z=D-n*(3/H);return"M"+p+","+E+"L"+v+","+B+"L"+u+","+z+"L"+p+","+E+"L"+C+","+r+"L"+G+","+k+"L"+A+","+l+"L"+F+","+j+"L"+C+","+r+"Z"}if(d.getSource().x==undefined){var e=_metExploreViz.getSessionById(b).getD3Data();var c=e.getNodes();f=c[d.getSource()];h=c[d.getTarget()];if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{f=d.getSource();h=d.getTarget();if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}return g},funcPath6:function(d,b){var f,h,g;function a(y,L){var K=metExploreD3.getMetaboliteStyle();var J=metExploreD3.getReactionStyle();var I=Math.sqrt(Math.pow(L.x-y.x,2)+Math.pow(L.y-y.y,2));var o=(L.x-y.x);var n=(L.y-y.y);var x=o/Math.abs(o);var w=n/Math.abs(n);if(y.getBiologicalType()=="metabolite"){var F=(Math.abs(I)*J.getWidth()/2)/Math.abs(o);var m=(Math.abs(I)*J.getHeight()/2)/Math.abs(n);var t=(F<m)?rT=F:rt=m}else{var F=(Math.abs(I)*K.getWidth()/2)/Math.abs(o);var m=(Math.abs(I)*K.getHeight()/2)/Math.abs(n);var t=(F<m)?rT=F:rt=m}var q=y.x+o*(1-(I-largeurNoeudS)/I);var E=y.y+n*(1-(I-largeurNoeudS)/I);var A=y.x+o*((I-t)/I);var l=y.y+n*((I-t)/I);var p=5;var C=y.x+o*((I-t-p)/I);var r=y.y+n*((I-t-p)/I);var H=C+n*(3/I);var k=r-o*(3/I);var G=C-n*(3/I);var j=r+o*(3/I);var D=y.x+o*(1-(I-largeurNoeudS-p)/I);var s=y.y+n*(1-(I-largeurNoeudS-p)/I);var v=D-n*(3/I);var B=s+o*(3/I);var u=D+n*(3/I);var z=s-o*(3/I);return"M"+q+","+E+"L"+v+","+B+"L"+u+","+z+"M"+q+","+E+"L"+v+","+B+"L"+D+","+s+"L"+C+","+r+"L"+H+","+k+"L"+A+","+l+"L"+G+","+j+"L"+C+","+r+"L"+D+","+s+"L"+u+","+z+"L"+q+","+E+"Z"}function g(u,C){var B=metExploreD3.getMetaboliteStyle();var A=metExploreD3.getReactionStyle();var y=Math.sqrt(Math.pow(C.x-u.x,2)+Math.pow(C.y-u.y,2));var n=(C.x-u.x);var m=(C.y-u.y);var t=n/Math.abs(n);var s=m/Math.abs(m);if(u.getBiologicalType()=="metabolite"){var q=(A.getWidth()+A.getHeight())/2/2;var r=(B.getHeight()+B.getWidth())/2/2}else{var q=(B.getHeight()+B.getWidth())/2/2;var r=(A.getWidth()+A.getHeight())/2/2}var v=u.x+n*((y-q)/y);var l=u.y+m*((y-q)/y);var o=5;var w=u.x+n*((y-q-o)/y);var p=u.y+m*((y-q-o)/y);var z=w+m*(3/y);var k=p-n*(3/y);var x=w-m*(3/y);var j=p+n*(3/y);return"M"+u.x+","+u.y+"L"+w+","+p+"L"+z+","+k+"L"+v+","+l+"L"+x+","+j+"L"+w+","+p+"Z"}if(d.getSource().x==undefined){var e=_metExploreViz.getSessionById(b).getD3Data();var c=e.getNodes();f=c[d.getSource()];h=c[d.getTarget()];if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}else{f=d.getSource();h=d.getTarget();if(f.x!=undefined&&f.y!=undefined&&h.x!=undefined&&h.y!=undefined){if(f.getReactionReversibility()||h.getReactionReversibility()){g=a(f,h)}else{g=g(f,h)}}else{g="M0,0L0,0Z"}}return g},refreshLink:function(c,g,b,f){metExploreD3.GraphLink.panelParent="#"+c;var e=g.getD3Data();var a=20;var d=b.getMarkerWidth()/2;metExploreD3.GraphLink.link=d3.select("#"+c).select("#D3viz").select("#graphComponent").selectAll("path.link").data(e.getLinks()).enter().append("svg:path").attr("class",String).attr("d",function(h){return metExploreD3.GraphLink.funcPath3(h,c)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(h){if(h.interaction=="out"){return b.getMarkerOutColor()}else{return b.getMarkerInColor()}}).style("stroke",b.getStrokeColor()).style("stroke-width",0.5).style("stroke-linejoin","bevel")},reloadLinks:function(a,c,b,d){d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("path.link").data(c.getLinks()).enter().insert("path",":first-child").attr("class",String).attr("d",function(e){return metExploreD3.GraphLink.funcPath3(e,parent)}).attr("class","link").attr("fill-rule","evenodd").attr("fill",function(e){if(e.interaction=="out"){return b.getMarkerOutColor()}else{return b.getMarkerInColor()}}).style("stroke",b.getStrokeColor()).style("stroke-width",0.5).style("stroke-linejoin","bevel")},linkTypeOfMetabolite:function(){_metExploreViz.setLinkedByTypeOfMetabolite(true);var b="viz";var d=_metExploreViz.getSessionById("viz");if(d!=undefined){var c=d.getForce();if(c!=undefined){c.stop()}}var a=metExploreD3.createLoadMask("Link in progress...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){var l={};var m={};var j={};var k={};d3.select("#viz").select("#D3viz").select("#graphComponent").selectAll("path.link").filter(function(n){return n.getInteraction()!="hiddenForce"}).each(function(n){if(n.getInteraction()=="in"){if(l[n.getTarget()]==null){l[n.getTarget()]=[]}l[n.getTarget()][l[n.getTarget()].length]=n.getSource();if(k[n.getSource()]==null){k[n.getSource()]=[]}k[n.getSource()][k[n.getSource()].length]=n.getTarget()}else{if(m[n.getSource()]==null){m[n.getSource()]=[]}m[n.getSource()][m[n.getSource()].length]=n.getTarget();if(j[n.getTarget()]==null){j[n.getTarget()]=[]}j[n.getTarget()][j[n.getTarget()].length]=n.getSource()}});for(var f in l){var e=-1;l[f].forEach(function(n){e++;l[f].forEach(function(o){if(n!=o&&n!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(n+" -- "+o,n,o,"viz")}});delete l[f][e]})}for(var f in m){var e=-1;m[f].forEach(function(n){e++;m[f].forEach(function(o){if(n!=o&&n!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(n+" -- "+o,n,o,"viz")}});delete m[f][e]})}for(var f in j){var e=-1;j[f].forEach(function(n){e++;j[f].forEach(function(o){if(n!=o&&n!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(n+" -- "+o,n,o,"viz")}});delete j[f][e]})}for(var f in k){var e=-1;k[f].forEach(function(n){e++;k[f].forEach(function(o){if(n!=o&&n!=undefined){metExploreD3.GraphLink.addHiddenLinkInDrawing(n+" -- "+o,n,o,"viz")}});delete k[f][e]})}metExploreD3.hideMask(a);var g=metExploreD3.GraphNetwork.isAnimated(d.getId());if(g=="true"){var h=d.getForce();if(h!=undefined){if((metExploreD3.GraphNetwork.isAnimated(d.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(d.getId())==null)){h.start()}}}},100)}},removeLinkTypeOfMetabolite:function(){_metExploreViz.setLinkedByTypeOfMetabolite(false);var b="viz";var d=_metExploreViz.getSessionById("viz");if(d!=undefined){var c=d.getForce();if(c!=undefined){c.stop()}}var a=metExploreD3.createLoadMask("Remove hidden link in progress...",b);if(a!=undefined){metExploreD3.showMask(a);metExploreD3.deferFunction(function(){metExploreD3.GraphLink.removeHiddenLinkInDrawing("viz");metExploreD3.hideMask(a);var e=metExploreD3.GraphNetwork.isAnimated(d.getId());if(e=="true"){var f=d.getForce();if(f!=undefined){if((metExploreD3.GraphNetwork.isAnimated(d.getId())=="true")||(metExploreD3.GraphNetwork.isAnimated(d.getId())==null)){f.start()}}}},100)}},addHiddenLinkInDrawing:function(g,a,f,b){var j=_metExploreViz.getSessionById(b);var d=j.getD3Data();d.addLink(g,a,f,"hiddenForce",false);var h=metExploreD3.getMetaboliteStyle();var e=metExploreD3.getLinkStyle();var c=j.getForce();link=d3.select("#"+b).select("#graphComponent").selectAll("path.link").data(c.links(),function(k){return k.source.id+"-"+k.target.id}).enter().insert("path",":first-child").attr("class","link").style("stroke",e.getStrokeColor()).style("opacity",0)},removeHiddenLinkInDrawing:function(b){var f=_metExploreViz.getSessionById(b);var e=f.getD3Data();var a=[];var d=f.getForce();var c=d3.select("#"+b).select("#graphComponent").selectAll("path.link").filter(function(g){return g.getInteraction()=="hiddenForce"}).each(function(g){a.push(g)}).remove();setTimeout(function(){for(i=0;i<a.length;i++){var h=a[i];e.removeLink(h);var g=d.links().indexOf(h);if(g!=-1){d.links().splice(g,1)}}},100)},tick:function(a,b){d3.select("#"+metExploreD3.GraphNode.panelParent).select("#D3viz").selectAll("path").filter(function(c){return $(this).attr("class")!="linkCaptionRev"&&$(this).attr("class")!="link"}).attr("d",metExploreD3.GraphNode.groupPath).attr("transform",d3.select("#"+a).select("#D3viz").select("#graphComponent").attr("transform"));d3.select("#"+a).select("#D3viz").select("#graphComponent").selectAll("path.link").attr("d",function(c){return metExploreD3.GraphLink.funcPath3(c,a)}).style("stroke-linejoin","bevel")},displayConvexhulls:function(b){var c=_metExploreViz.getGeneralStyle();var d=d3.select("#"+b).select("#D3viz").selectAll("path").filter(function(e){return $(this).attr("class")!="linkCaptionRev"&&$(this).attr("class")!="link"});var a=c.isDisplayedConvexhulls();if(!a){d.remove()}else{if(d[0].length==0){metExploreD3.GraphNode.loadPath(b,a)}d=d3.select("#"+b).select("#D3viz").selectAll("path").filter(function(e){return $(this).attr("class")!="linkCaptionRev"&&$(this).attr("class")!="link"});d.attr("d",metExploreD3.GraphNode.groupPath).attr("transform",d3.select("#"+b).select("#D3viz").select("#graphComponent").attr("transform"))}}};