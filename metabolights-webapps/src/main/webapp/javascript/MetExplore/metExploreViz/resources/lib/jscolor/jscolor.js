var jscolor={dir:"",bindClass:"color",binding:true,preloading:true,install:function(){jscolor.init()},init:function(){if(jscolor.binding){jscolor.bind()}if(jscolor.preloading){jscolor.preload()}},getDir:function(){if(!jscolor.dir){var a=jscolor.detectDir();jscolor.dir=a!==false?a:"jscolor/"}return jscolor.dir},detectDir:function(){var c=location.href;var d=document.getElementsByTagName("base");for(var a=0;a<d.length;a+=1){if(d[a].href){c=d[a].href}}var d=document.getElementsByTagName("script");for(var a=0;a<d.length;a+=1){if(d[a].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(d[a].src)){var f=new jscolor.URI(d[a].src);var b=f.toAbsolute(c);b.path=b.path.replace(/[^\/]+$/,"");b.query=null;b.fragment=null;return b.toString()}}return false},bind:function(){var d=new RegExp("(^|\\s)("+jscolor.bindClass+")(\\s*(\\{[^}]*\\})|\\s|$)","i");var f=document.getElementsByTagName("input");for(var c=0;c<f.length;c+=1){if(jscolor.isColorAttrSupported&&f[c].type.toLowerCase()=="color"){continue}var b;if(!f[c].color&&f[c].className&&(b=f[c].className.match(d))){var g={};if(b[4]){try{g=(new Function("return ("+b[4]+")"))()}catch(a){}}f[c].color=new jscolor.color(f[c],g)}}},preload:function(){for(var a in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(a)){jscolor.loadImage(a)}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){jscolor.imgRequire[a]=true},loadImage:function(a){if(!jscolor.imgLoaded[a]){jscolor.imgLoaded[a]=new Image();jscolor.imgLoaded[a].src=jscolor.getDir()+a}},fetchElement:function(a){return typeof a==="string"?document.getElementById(a):a},addEvent:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}}},fireEvent:function(a,c){if(!a){return}if(document.createEvent){var b=document.createEvent("HTMLEvents");b.initEvent(c,true,true);a.dispatchEvent(b)}else{if(document.createEventObject){var b=document.createEventObject();a.fireEvent("on"+c,b)}else{if(a["on"+c]){a["on"+c]()}}}},getElementPos:function(c){var d=c,b=c;var a=0,f=0;if(d.offsetParent){do{a+=d.offsetLeft;f+=d.offsetTop}while(d=d.offsetParent)}while((b=b.parentNode)&&b.nodeName.toUpperCase()!=="BODY"){a-=b.scrollLeft;f-=b.scrollTop}return[a,f]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(b){var a=0,c=0;if(!b){b=window.event}if(typeof b.offsetX==="number"){a=b.offsetX;c=b.offsetY}else{if(typeof b.layerX==="number"){a=b.layerX;c=b.layerY}}return{x:a,y:c}},getViewPos:function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset]}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop]}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}else{return[0,0]}}}},getViewSize:function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight]}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight]}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else{return[0,0]}}}},URI:function(a){this.scheme=null;this.authority=null;this.path="";this.query=null;this.fragment=null;this.parse=function(d){var c=d.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=c[3]?c[2]:null;this.authority=c[5]?c[6]:null;this.path=c[7];this.query=c[9]?c[10]:null;this.fragment=c[12]?c[13]:null;return this};this.toString=function(){var c="";if(this.scheme!==null){c=c+this.scheme+":"}if(this.authority!==null){c=c+"//"+this.authority}if(this.path!==null){c=c+this.path}if(this.query!==null){c=c+"?"+this.query}if(this.fragment!==null){c=c+"#"+this.fragment}return c};this.toAbsolute=function(e){var e=new jscolor.URI(e);var d=this;var c=new jscolor.URI;if(e.scheme===null){return false}if(d.scheme!==null&&d.scheme.toLowerCase()===e.scheme.toLowerCase()){d.scheme=null}if(d.scheme!==null){c.scheme=d.scheme;c.authority=d.authority;c.path=b(d.path);c.query=d.query}else{if(d.authority!==null){c.authority=d.authority;c.path=b(d.path);c.query=d.query}else{if(d.path===""){c.path=e.path;if(d.query!==null){c.query=d.query}else{c.query=e.query}}else{if(d.path.substr(0,1)==="/"){c.path=b(d.path)}else{if(e.authority!==null&&e.path===""){c.path="/"+d.path}else{c.path=e.path.replace(/[^\/]+$/,"")+d.path}c.path=b(c.path)}c.query=d.query}c.authority=e.authority}c.scheme=e.scheme}c.fragment=d.fragment;return c};function b(e){var c="";while(e){if(e.substr(0,3)==="../"||e.substr(0,2)==="./"){e=e.replace(/^\.+/,"").substr(1)}else{if(e.substr(0,3)==="/./"||e==="/."){e="/"+e.substr(3)}else{if(e.substr(0,4)==="/../"||e==="/.."){e="/"+e.substr(4);c=c.replace(/\/?[^\/]*$/,"")}else{if(e==="."||e===".."){e=""}else{var d=e.match(/^\/?[^\/]*/)[0];e=e.substr(d.length);c=c+d}}}}}return c}if(a){this.parse(a)}},color:function(C,e){this.required=true;this.adjust=true;this.hash=false;this.caps=true;this.slider=true;this.valueElement=C;this.styleElement=C;this.onImmediateChange=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=true;this.pickerMode="HSV";this.pickerPosition="bottom";this.pickerSmartPosition=true;this.pickerButtonHeight=20;this.pickerClosable=false;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=10000;for(var t in e){if(e.hasOwnProperty(t)){this[t]=e[t]}}this.hidePicker=function(){if(v()){h()}};this.showPicker=function(){if(!v()){var L=jscolor.getElementPos(C);var I=jscolor.getElementSize(C);var F=jscolor.getViewPos();var N=jscolor.getViewSize();var p=u(this);var M,K,J;switch(this.pickerPosition.toLowerCase()){case"left":M=1;K=0;J=-1;break;case"right":M=1;K=0;J=1;break;case"top":M=0;K=1;J=-1;break;default:M=0;K=1;J=1;break}var H=(I[K]+p[K])/2;if(!this.pickerSmartPosition){var G=[L[M],L[K]+I[K]-H+H*J]}else{var G=[-F[M]+L[M]+p[M]>N[M]?(-F[M]+L[M]+I[M]/2>N[M]/2&&L[M]+I[M]-p[M]>=0?L[M]+I[M]-p[M]:L[M]):L[M],-F[K]+L[K]+I[K]+p[K]-H+H*J>N[K]?(-F[K]+L[K]+I[K]/2>N[K]/2&&L[K]+I[K]-H-H*J>=0?L[K]+I[K]-H-H*J:L[K]+I[K]-H+H*J):(L[K]+I[K]-H+H*J>=0?L[K]+I[K]-H+H*J:L[K]+I[K]-H-H*J)]}l(G[M],G[K])}};this.importColor=function(){if(!a){this.exportColor()}else{if(!this.adjust){if(!this.fromString(a.value,y)){E.style.backgroundImage=E.jscStyle.backgroundImage;E.style.backgroundColor=E.jscStyle.backgroundColor;E.style.color=E.jscStyle.color;this.exportColor(y|D)}}else{if(!this.required&&/^\s*$/.test(a.value)){a.value="";E.style.backgroundImage=E.jscStyle.backgroundImage;E.style.backgroundColor=E.jscStyle.backgroundColor;E.style.color=E.jscStyle.color;this.exportColor(y|D)}else{if(this.fromString(a.value)){}else{this.exportColor()}}}}};this.exportColor=function(p){if(!(p&y)&&a){var F=this.toString();if(this.caps){F=F.toUpperCase()}if(this.hash){F="#"+F}a.value=F}if(!(p&D)&&E){E.style.backgroundImage="none";E.style.backgroundColor="#"+this.toString();E.style.color=0.213*this.rgb[0]+0.715*this.rgb[1]+0.072*this.rgb[2]<0.5?"#FFF":"#000"}if(!(p&w)&&v()){s()}if(!(p&f)&&v()){B()}};this.fromHSV=function(H,G,F,p){if(H!==null){H=Math.max(0,this.minH,Math.min(6,this.maxH,H))}if(G!==null){G=Math.max(0,this.minS,Math.min(1,this.maxS,G))}if(F!==null){F=Math.max(0,this.minV,Math.min(1,this.maxV,F))}this.rgb=i(H===null?this.hsv[0]:(this.hsv[0]=H),G===null?this.hsv[1]:(this.hsv[1]=G),F===null?this.hsv[2]:(this.hsv[2]=F));this.exportColor(p)};this.fromRGB=function(J,I,p,F){if(J!==null){J=Math.max(0,Math.min(1,J))}if(I!==null){I=Math.max(0,Math.min(1,I))}if(p!==null){p=Math.max(0,Math.min(1,p))}var H=z(J===null?this.rgb[0]:J,I===null?this.rgb[1]:I,p===null?this.rgb[2]:p);if(H[0]!==null){this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,H[0]))}if(H[2]!==0){this.hsv[1]=H[1]===null?null:Math.max(0,this.minS,Math.min(1,this.maxS,H[1]))}this.hsv[2]=H[2]===null?null:Math.max(0,this.minV,Math.min(1,this.maxV,H[2]));var G=i(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=G[0];this.rgb[1]=G[1];this.rgb[2]=G[2];this.exportColor(F)};this.fromString=function(G,F){var p=G.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);if(!p){return false}else{if(p[1].length===6){this.fromRGB(parseInt(p[1].substr(0,2),16)/255,parseInt(p[1].substr(2,2),16)/255,parseInt(p[1].substr(4,2),16)/255,F)}else{this.fromRGB(parseInt(p[1].charAt(0)+p[1].charAt(0),16)/255,parseInt(p[1].charAt(1)+p[1].charAt(1),16)/255,parseInt(p[1].charAt(2)+p[1].charAt(2),16)/255,F)}return true}};this.toString=function(){return((256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1))};function z(J,I,F){var K=Math.min(Math.min(J,I),F);var G=Math.max(Math.max(J,I),F);var p=G-K;if(p===0){return[null,0,G]}var H=J===K?3+(F-I)/p:(I===K?5+(J-F)/p:1+(I-J)/p);return[H===6?0:H,p/G,G]}function i(I,H,F){if(I===null){return[F,F,F]}var G=Math.floor(I);var J=G%2?I-G:1-(I-G);var p=F*(1-H);var K=F*(1-H*J);switch(G){case 6:case 0:return[F,K,p];case 1:return[K,F,p];case 2:return[p,F,K];case 3:return[p,K,F];case 4:return[K,p,F];case 5:return[F,p,K]}}function h(){delete jscolor.picker.owner;document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function l(M,L){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(m.pickerCloseText)};for(var J=0,K=4;J<jscolor.images.sld[1];J+=K){var I=document.createElement("div");I.style.height=K+"px";I.style.fontSize="1px";I.style.lineHeight="0";jscolor.picker.sld.appendChild(I)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var F=jscolor.picker;F.box.onmouseup=F.box.onmouseout=function(){C.focus()};F.box.onmousedown=function(){o=true};F.box.onmousemove=function(p){if(d||q){d&&x(p);q&&j(p);if(document.selection){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}g()}};if("ontouchstart" in window){var P=function(Q){var p={offsetX:Q.touches[0].pageX-k.X,offsetY:Q.touches[0].pageY-k.Y};if(d||q){d&&x(p);q&&j(p);g()}Q.stopPropagation();Q.preventDefault()};F.box.removeEventListener("touchmove",P,false);F.box.addEventListener("touchmove",P,false)}F.padM.onmouseup=F.padM.onmouseout=function(){if(d){d=false;jscolor.fireEvent(a,"change")}};F.padM.onmousedown=function(p){switch(b){case 0:if(m.hsv[2]===0){m.fromHSV(null,null,1)}break;case 1:if(m.hsv[1]===0){m.fromHSV(null,1,null)}break}q=false;d=true;x(p);g()};if("ontouchstart" in window){F.padM.addEventListener("touchstart",function(p){k={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-k.X,offsetY:p.touches[0].pageY-k.Y})})}F.sldM.onmouseup=F.sldM.onmouseout=function(){if(q){q=false;jscolor.fireEvent(a,"change")}};F.sldM.onmousedown=function(p){d=false;q=true;j(p);g()};if("ontouchstart" in window){F.sldM.addEventListener("touchstart",function(p){k={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-k.X,offsetY:p.touches[0].pageY-k.Y})})}var O=u(m);F.box.style.width=O[0]+"px";F.box.style.height=O[1]+"px";F.boxB.style.position="absolute";F.boxB.style.clear="both";F.boxB.style.left=M+"px";F.boxB.style.top=L+"px";F.boxB.style.zIndex=m.pickerZIndex;F.boxB.style.border=m.pickerBorder+"px solid";F.boxB.style.borderColor=m.pickerBorderColor;F.boxB.style.background=m.pickerFaceColor;F.pad.style.width=jscolor.images.pad[0]+"px";F.pad.style.height=jscolor.images.pad[1]+"px";F.padB.style.position="absolute";F.padB.style.left=m.pickerFace+"px";F.padB.style.top=m.pickerFace+"px";F.padB.style.border=m.pickerInset+"px solid";F.padB.style.borderColor=m.pickerInsetColor;F.padM.style.position="absolute";F.padM.style.left="0";F.padM.style.top="0";F.padM.style.width=m.pickerFace+2*m.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";F.padM.style.height=F.box.style.height;F.padM.style.cursor="crosshair";F.sld.style.overflow="hidden";F.sld.style.width=jscolor.images.sld[0]+"px";F.sld.style.height=jscolor.images.sld[1]+"px";F.sldB.style.display=m.slider?"block":"none";F.sldB.style.position="absolute";F.sldB.style.right=m.pickerFace+"px";F.sldB.style.top=m.pickerFace+"px";F.sldB.style.border=m.pickerInset+"px solid";F.sldB.style.borderColor=m.pickerInsetColor;F.sldM.style.display=m.slider?"block":"none";F.sldM.style.position="absolute";F.sldM.style.right="0";F.sldM.style.top="0";F.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+m.pickerFace+2*m.pickerInset+"px";F.sldM.style.height=F.box.style.height;try{F.sldM.style.cursor="pointer"}catch(H){F.sldM.style.cursor="hand"}function N(){var p=m.pickerInsetColor.split(/\s+/);var Q=p.length<2?p[0]:p[1]+" "+p[0]+" "+p[0]+" "+p[1];F.btn.style.borderColor=Q}F.btn.style.display=m.pickerClosable?"block":"none";F.btn.style.position="absolute";F.btn.style.left=m.pickerFace+"px";F.btn.style.bottom=m.pickerFace+"px";F.btn.style.padding="0 15px";F.btn.style.height="18px";F.btn.style.border=m.pickerInset+"px solid";N();F.btn.style.color=m.pickerButtonColor;F.btn.style.font="12px sans-serif";F.btn.style.textAlign="center";try{F.btn.style.cursor="pointer"}catch(H){F.btn.style.cursor="hand"}F.btn.onmousedown=function(){m.hidePicker()};F.btnS.style.lineHeight=F.btn.style.height;switch(b){case 0:var G="hs.png";break;case 1:var G="hv.png";break}F.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";F.padM.style.backgroundRepeat="no-repeat";F.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')";F.sldM.style.backgroundRepeat="no-repeat";F.pad.style.backgroundImage="url('"+jscolor.getDir()+G+"')";F.pad.style.backgroundRepeat="no-repeat";F.pad.style.backgroundPosition="0 0";s();B();jscolor.picker.owner=m;document.getElementsByTagName("body")[0].appendChild(F.boxB)}function u(F){var p=[2*F.pickerInset+2*F.pickerFace+jscolor.images.pad[0]+(F.slider?2*F.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),F.pickerClosable?4*F.pickerInset+3*F.pickerFace+jscolor.images.pad[1]+F.pickerButtonHeight:2*F.pickerInset+2*F.pickerFace+jscolor.images.pad[1]];return p}function s(){switch(b){case 0:var H=1;break;case 1:var H=2;break}var L=Math.round((m.hsv[0]/6)*(jscolor.images.pad[0]-1));var K=Math.round((1-m.hsv[H])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=(m.pickerFace+m.pickerInset+L-Math.floor(jscolor.images.cross[0]/2))+"px "+(m.pickerFace+m.pickerInset+K-Math.floor(jscolor.images.cross[1]/2))+"px";var p=jscolor.picker.sld.childNodes;switch(b){case 0:var J=i(m.hsv[0],m.hsv[1],1);for(var F=0;F<p.length;F+=1){p[F].style.backgroundColor="rgb("+(J[0]*(1-F/p.length)*100)+"%,"+(J[1]*(1-F/p.length)*100)+"%,"+(J[2]*(1-F/p.length)*100)+"%)"}break;case 1:var J,M,I=[m.hsv[2],0,0];var F=Math.floor(m.hsv[0]);var G=F%2?m.hsv[0]-F:1-(m.hsv[0]-F);switch(F){case 6:case 0:J=[0,1,2];break;case 1:J=[1,0,2];break;case 2:J=[2,0,1];break;case 3:J=[2,1,0];break;case 4:J=[1,2,0];break;case 5:J=[0,2,1];break}for(var F=0;F<p.length;F+=1){M=1-1/(p.length-1)*F;I[1]=I[0]*(1-M*G);I[2]=I[0]*(1-M);p[F].style.backgroundColor="rgb("+(I[J[0]]*100)+"%,"+(I[J[1]]*100)+"%,"+(I[J[2]]*100)+"%)"}break}}function B(){switch(b){case 0:var p=2;break;case 1:var p=1;break}var F=Math.round((1-m.hsv[p])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(m.pickerFace+m.pickerInset+F-Math.floor(jscolor.images.arrow[1]/2))+"px"}function v(){return jscolor.picker&&jscolor.picker.owner===m}function r(){if(a===C){m.importColor()}if(m.pickerOnfocus){m.hidePicker()}}function n(){if(a!==C){m.importColor()}}function x(G){var F=jscolor.getRelMousePos(G);var p=F.x-m.pickerFace-m.pickerInset;var H=F.y-m.pickerFace-m.pickerInset;switch(b){case 0:m.fromHSV(p*(6/(jscolor.images.pad[0]-1)),1-H/(jscolor.images.pad[1]-1),null,f);break;case 1:m.fromHSV(p*(6/(jscolor.images.pad[0]-1)),null,1-H/(jscolor.images.pad[1]-1),f);break}}function j(F){var p=jscolor.getRelMousePos(F);var G=p.y-m.pickerFace-m.pickerInset;switch(b){case 0:m.fromHSV(null,null,1-G/(jscolor.images.sld[1]-1),w);break;case 1:m.fromHSV(null,1-G/(jscolor.images.sld[1]-1),null,w);break}}function g(){if(m.onImmediateChange){var p;if(typeof m.onImmediateChange==="string"){p=new Function(m.onImmediateChange)}else{p=m.onImmediateChange}p.call(m)}}var m=this;var b=this.pickerMode.toLowerCase()==="hvs"?1:0;var o=false;var a=jscolor.fetchElement(this.valueElement),E=jscolor.fetchElement(this.styleElement);var d=false,q=false,k={};var y=1<<0,D=1<<1,w=1<<2,f=1<<3;jscolor.isColorAttrSupported=false;var c=document.createElement("input");if(c.setAttribute){c.setAttribute("type","color");if(c.type.toLowerCase()=="color"){jscolor.isColorAttrSupported=true}}jscolor.addEvent(C,"focus",function(){if(m.pickerOnfocus){m.showPicker()}});jscolor.addEvent(C,"blur",function(){if(!o){window.setTimeout(function(){o||r();o=false},0)}else{o=false}});if(a){var A=function(){m.fromString(a.value,y);g()};jscolor.addEvent(a,"keyup",A);jscolor.addEvent(a,"input",A);jscolor.addEvent(a,"blur",n);a.setAttribute("autocomplete","off")}if(E){E.jscStyle={backgroundImage:E.style.backgroundImage,backgroundColor:E.style.backgroundColor,color:E.style.color}}switch(b){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png");break}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();